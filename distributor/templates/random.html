{% extends "base.html" %}
{% block style %}
{% endblock %}

{% block title %}

{% load static from staticfiles %}
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
	<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
	<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"></script>
	
	
	
   <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.0/bootstrap-table.css">-->
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.2.2/css/buttons.dataTables.min.css">
    
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.0/extensions/export/bootstrap-table-export.min.js"></script>-->




<!--TabletoJSON jquery plugin-->
<script src="{% static 'tableExport.min.js' %}"></script>
    


<title>Trying BST Trable</title>

{% endblock %}

{% block content%}
<h1>This is temporary. Change</h1>

	<div class="table-responsive">
		<table class="table table-striped table-bordered table-hover display nowrap" id="example">
			<thead class="thead-inverse header-background">
            <tr>
                <th class="text-center">Journal Key</th>
          <th class="text-center">Remarks</th>
          <th class="text-center">Group</th>
      		<th class="text-center">Date</th>
      		<th class="text-center">Debit/Credit</th>
          <th class="text-center">Account</th>
      		<th class="text-center">Debit Value</th>
      		<th class="text-center">Credit Value</th>
            </tr>
        </thead>
        <tbody>
        	{% for journal in journals %}
          {% for entry in journal.journalEntry_journal.all %}
            <tr align="center">
      			  <td>{{journal.key}}</td>
              <td>{{journal.journal_type}}</td>
              <td>{{journal.group}}</td>
      				<td>{{journal.date|date:'d-m-Y'}}</td>
              <td>{{entry.transaction_type}}</td>
              {% if entry.transaction_type == "Debit" %}
      				  <td align="left">{{entry.account.name}}</td>
      				  <td>{{entry.value}}</td>
                <td></td>
              {% else %}
                <td align="right">{{entry.account.name}}</td>
                <td></td>
                <td>{{entry.value}}</td>
              {% endif %}
            </tr>
          {% endfor %}           
	    	{% endfor %}
        </tbody>
    </table>


<!--<script>
    $(function () {


$('.dropdown-toggle').click( function() {
  			var table_data = $('.journal').tableToJSON();
  			console.log(table_data);
  			//alert(JSON.stringify(table));  
		});

//$('.journal').tableExport({type:'csv', data:'table_data'});
	var $table = $('#table');
	$('#toolbar').find('select').change(function () {
    $table.bootstrapTable('refreshOptions', {
      exportDataType: $(this).val()
    });
  });
});
</script>
-->

<script type="text/javascript">
	$(document).ready(function() {
    $('#example').DataTable( {
    	"searching": false,
        dom: 'Bfrtip',
        buttons: [
            'csv', 'excel', 'pdf',
        ]
    } );
} );
</script>

{% endblock %}