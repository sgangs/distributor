{% extends extension %}

{% load crispy_forms_tags %}


{%block title%}

<title>Edit Sales Invoice</title>


{% endblock %} 

{% block content%}

<!-- <div class="row col-md-12 hidden-print">
    <a href="{% url 'sales:new_sales_invoice' %}"><button type="button" class="btn btn-primary btn-sm" id="not_print">New Sales Invoice</button></a>
</div> -->
<div class="col-xs-12 text-center">
  <h3>EDIT INVOICE</h3>
</div>

<div class="row invoice_meta" hidden>
    <div class="col-md-12">
        <div class="row">
            <div class="col-xs-6 text-left"  id='pos_print'>
                <address class='invoiceid'>                    
                </address>
            </div>
            <div class="col-xs-6 text-left" hidden>
                <label class="control-label">Sales Invoice ID</label>                
                <input class="form-control sales_inv_pk">
            </div>
            <div class="col-xs-6 text-right"  id='pos_print'>
                <address class='original_date'>
                    
                </address>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6 text-left"  id='pos_print'>
                <address class='customer'>
                </address>
            </div>
            <div class="col-xs-6 text-right" id='not_pos_print'>
                <address class='warehouse'>
                    
                    </address>
            </div>
        </div>
            
    </div>
</div>


<div class="row">
    <div class="form-group col-xs-3">
        <label class="control-label">Sales Invoice No</label>                
        <input class="form-control sales_inv_no">
    </div>
    <div class="form-group col-xs-3">
        <label class="control-label">Click here to get invoice data</label>
        <p><button type="button" class="btn btn-primary btn-sm get_invoice">Get data</button></p>
    </div>

    <div class="form-group col-xs-3">
        <label class="control-label">Click here to edit bill details</label>
        <p><button type="button" class="btn btn-primary btn-sm editMetaData">Edit Details</button></p>
    </div>

    <!-- <div class="form-group col-xs-3">
        <label class="control-label">Select Customer</label>
        <select class="form-control selectpicker customer" id="customer" data-live-search="true">
            <option disabled selected hidden style='display: none' value>Select Customer</option>               
        </select>        
    </div> -->
    <!-- <div class="form-group col-xs-3 col-xs-offset-3">
        <label class="control-label">Sales Return Date</label>
        <input class="form-control date">
    </div> -->  
        
</div>



<br>
<br>



<div id='print' class="print">

<div class="" id='pos_print'>	
<table class="table table-striped table-bordered details text-center">
	<thead>
    	<tr class="text-center" id='pos_print'> 
        	<th class="text-center"></th>
            <th class="text-center" hidden>ID</th>
            <th class="text-center" hidden>ID</th>
            <th class="text-center">Item</th>
            <th class="text-center" hidden>Qty</th>
            <th class="text-center">Qty (Revised)</th>
            <!-- <th class="text-center hidden-print"><h5>Free w/o tax</h5></th>
            <th class="text-center hidden-print"><h5>Free with tax</h5></th> -->
            <th class="text-center" >Unit</th>
            <th class="text-center" hidden>Unit Multiplier</th>
            <!-- <th class="text-center visible-print-block"><h5>Free</h5></th> -->
            <th class="text-center" id='not_pos_print' hidden>Sales Price(Discounted)</th>
            <th class="text-center" id='not_pos_print'>Sales Price</th>
            <th class="text-center" >Disc. Type-1</th>
            <th class="text-center" >Disc. Value-1</th>
            <th class="text-center" >Disc. Type-2</th>
            <th class="text-center" >Disc. Value-2</th>
            <th class="text-center" hidden>TSP</th>
            <th class="text-center" hidden>MRP</th>
            <th class="text-center" >Taxable Total</th>
            <!-- <th class="text-center" id='not_pos_print'><h5>VAT Type</h5></th> -->
            <!-- <th class="text-center" id='not_pos_print'><h5>VAT %</h5></th> -->
            <th class="text-center" >CGST %</th>
            <th class="text-center" >CGST Amt</th>
            <th class="text-center" >SGST %</th>
            <th class="text-center" >SGST Amt</th>
            <th class="text-center is_igst" >IGST %</th>
            <th class="text-center is_igst" >IGST Amt</th>
            <th class="text-center">Total</th>
        </tr>
	</thead>
	<tbody>
	</tbody>
</table>
</div>

<br>


<div class="row text-right billdata">
	<!-- <div class="col-xs-6" id='not_pos_print'>
		<table class="table metadata boderless">
			<tr class='text-left'>
				<td colspan="1" class='text-left'>Payment Due date</td>
				<td colspan="1" class='text-left'></td>
				<td colspan="1" class=" text-left duedate"></td>

			</tr>						
		</table>
	</div> -->
	<div class="col-xs-4 col-xs-offset-8"  id='pos_print'>
		<table class="table metadata boderless" >
			<tr>
				<td>Subtotal</td>
				<td>Rs.</td>
		        <td class='subtotal_receipt'></td>
			</tr>
			<tr>
				<td>Tax Total</td>
				<td>Rs.</td>
		        <td class='taxtotal_receipt'></td>
			</tr>
            <tr>
                <td>Round Off</td>
                <td>Rs.</td>
                <td><input type="number" class='form-control round' min="-0.99" max="0.99" step="0.01"></td>
            </tr>
			<tr>
				<td>Total</td>
				<td>Rs.</td>
		        <td class='total_receipt'></td>
			</tr>
		</table>
	</div>
</div>
<br>
</div>

<!-- Modal -->
<div class="modal fade" id="billMetaData" tabindex="-1" role="dialog" aria-labelledby="billMetaDataLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Edit customer Data</h4>
            </div>
        <div class="modal-body">
            <form action="" method="post">
                <div class="form-group namediv">
                    <label for="classname" class="control-label">Customer Address</label>
                    <input type="text" class="form-control editCustomerAddress">
                </div>
                <div class="form-group percentdiv">
                    <label class="control-label">Customer GST</label>
                    <input type="text" class="form-control editCustomerGST">
                </div>
                <div class="form-group percentdiv">
                    <label class="control-label">Customer Drug License-1</label>
                    <input type="text" class="form-control editCustomerDL_1">
                </div>
                <div class="form-group percentdiv">
                    <label class="control-label">Customer Drug License-2</label>
                    <input type="text" class="form-control editCustomerDL_2">
                </div>
            </form>    
        </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary submit">Submit</button>
            </div>
        </div>
    </div>
</div>


<button type="button" class="btn btn-primary submit">Submit</button>
<!-- <button type="button" class="btn btn-primary posprintout" id="not_print">Take POS Print Out</button>
 -->
<!-- Sweetalert JS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>

<!-- Moment.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/moment.min.js"></script>

<!-- Bootstrap Datepicker -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.standalone.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>


{% load static from staticfiles %}

<script src="{% static 'sales/sales_edit.js' %}"></script>

<script>
	csrf_token='{{csrf_token}}';
    $('.date').datepicker({
        autoclose: true,
        // endDate: moment(),
        // endDate: '0d',
         todayHighlight: true,
        format: 'dd/mm/yyyy',    
    });
    $(".date").datepicker("setDate", new Date());
</script>


{% endblock %}



